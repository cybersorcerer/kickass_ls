{
  "name": "Kick Assembler LSP v0.9.5 Baseline Test Suite",
  "description": "Comprehensive baseline tests for LSP server version 0.9.5",
  "version": "0.9.5",
  "setup": {
    "serverPath": "../../kickass_ls",
    "serverArgs": [],
    "rootPath": ".",
    "files": {}
  },
  "testCases": [
    {
      "name": "Basic Syntax - No Errors",
      "description": "01-basic-syntax.asm should have no diagnostics",
      "type": "diagnostics",
      "input": {
        "file": "01-basic-syntax.asm"
      },
      "expected": {
        "diagnostics": []
      }
    },
    {
      "name": "Directives - No Errors",
      "description": "02-directives.asm should have no critical errors",
      "type": "diagnostics",
      "input": {
        "file": "02-directives.asm"
      },
      "expected": {
        "maxErrors": 0
      }
    },
    {
      "name": "Addressing Modes - No Errors",
      "description": "03-addressing-modes.asm should have no diagnostics",
      "type": "diagnostics",
      "input": {
        "file": "03-addressing-modes.asm"
      },
      "expected": {
        "diagnostics": []
      }
    },
    {
      "name": "Illegal Opcodes - No Errors",
      "description": "04-illegal-opcodes.asm should recognize illegal opcodes",
      "type": "diagnostics",
      "input": {
        "file": "04-illegal-opcodes.asm"
      },
      "expected": {
        "maxErrors": 0
      }
    },
    {
      "name": "C64 Memory Map - No Errors",
      "description": "05-c64-memory.asm should recognize all C64 addresses",
      "type": "diagnostics",
      "input": {
        "file": "05-c64-memory.asm"
      },
      "expected": {
        "diagnostics": []
      }
    },
    {
      "name": "Completion - Directive Trigger",
      "description": "Typing '.' should show directive completions",
      "type": "completion",
      "input": {
        "file": "06-completion-context.asm",
        "line": 18,
        "character": 0
      },
      "expected": {
        "minItems": 20,
        "completionItems": [
          {
            "label": ".var",
            "kind": 14
          },
          {
            "label": ".const",
            "kind": 14
          },
          {
            "label": ".byte",
            "kind": 14
          }
        ]
      }
    },
    {
      "name": "Completion - Mnemonic LDA",
      "description": "Typing 'lda ' should show addressing mode hints",
      "type": "completion",
      "input": {
        "file": "06-completion-context.asm",
        "line": 14,
        "character": 8
      },
      "expected": {
        "minItems": 3,
        "completionItems": [
          {
            "label": "#",
            "detail": "Immediate addressing mode"
          },
          {
            "label": "$",
            "detail": "Absolute addressing mode"
          },
          {
            "label": "(",
            "detail": "Indirect addressing mode"
          }
        ]
      }
    },
    {
      "name": "Completion - After .var Name",
      "description": "After '.var name' (before =) should show no completions",
      "type": "completion",
      "input": {
        "file": "06-completion-context.asm",
        "line": 9,
        "character": 19
      },
      "expected": {
        "maxItems": 5
      }
    },
    {
      "name": "Completion - C64 Memory $d0",
      "description": "Typing '$d0' should show VIC-II registers",
      "type": "completion",
      "input": {
        "file": "06-completion-context.asm",
        "line": 33,
        "character": 11
      },
      "expected": {
        "minItems": 5,
        "completionItems": [
          {
            "label": "$d020"
          },
          {
            "label": "$d021"
          }
        ]
      }
    },
    {
      "name": "Diagnostics - Missing Operand LDA",
      "description": "LDA without operand should produce error",
      "type": "diagnostics",
      "input": {
        "file": "07-diagnostics.asm"
      },
      "expected": {
        "minErrors": 3,
        "diagnostics": [
          {
            "line": 13,
            "severity": 1,
            "message": "operand"
          },
          {
            "line": 14,
            "severity": 1,
            "message": "operand"
          }
        ]
      }
    },
    {
      "name": "Diagnostics - Invalid Hex Value",
      "description": "Invalid hex like '$XY' should produce error",
      "type": "diagnostics",
      "input": {
        "file": "07-diagnostics.asm"
      },
      "expected": {
        "diagnostics": [
          {
            "line": 17,
            "severity": 1,
            "message": "hex"
          }
        ]
      }
    },
    {
      "name": "Hover - LDA Mnemonic",
      "description": "Hovering over LDA should show documentation",
      "type": "hover",
      "input": {
        "file": "03-addressing-modes.asm",
        "line": 6,
        "character": 5
      },
      "expected": {
        "hoverContent": "LDA"
      }
    },
    {
      "name": "Hover - $d020 Address",
      "description": "Hovering over $d020 should show 'Border Color'",
      "type": "hover",
      "input": {
        "file": "05-c64-memory.asm",
        "line": 18,
        "character": 9
      },
      "expected": {
        "hoverContent": "Border"
      }
    },
    {
      "name": "Symbols - Extract Labels",
      "description": "Should extract all labels from file",
      "type": "symbols",
      "input": {
        "file": "01-basic-syntax.asm"
      },
      "expected": {
        "minSymbols": 3,
        "symbols": [
          {
            "name": "start",
            "kind": 13
          },
          {
            "name": "loop",
            "kind": 13
          },
          {
            "name": "end",
            "kind": 13
          }
        ]
      }
    },
    {
      "name": "Definition - Jump to Label",
      "description": "Go-to-definition on 'loop' should jump to label",
      "type": "definition",
      "input": {
        "file": "01-basic-syntax.asm",
        "line": 10,
        "character": 9
      },
      "expected": {
        "locations": [
          {
            "file": "01-basic-syntax.asm",
            "line": 7
          }
        ]
      }
    },
    {
      "name": "Built-ins - No Errors",
      "description": "08-builtins.asm should recognize all built-in functions",
      "type": "diagnostics",
      "input": {
        "file": "08-builtins.asm"
      },
      "expected": {
        "maxErrors": 0
      }
    },
    {
      "name": "Completion - Built-in Functions",
      "description": "Should offer built-in functions in expression context",
      "type": "completion",
      "input": {
        "file": "08-builtins.asm",
        "line": 5,
        "character": 20
      },
      "expected": {
        "minItems": 10,
        "completionItems": [
          {
            "label": "sin"
          },
          {
            "label": "cos"
          },
          {
            "label": "sqrt"
          }
        ]
      }
    }
  ]
}
